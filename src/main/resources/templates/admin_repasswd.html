<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>修改密码</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/admin_header.css}">
    <style>
        .container {
            margin-top: 50px;
        }
        .form-container {
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* 添加阴影效果 */
            border-radius: 20px; /* 让容器的四角圆润 */
            border-top: 5px solid #87CEEB;
        }
        .form-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
            font-weight: bold;
        }
        .btn-submit {
            width: 100%; /* 设置按钮宽度为100% */
            font-size: 18px; /* 设置按钮字体大小 */
        }
    </style>
</head>
<body>
<div th:replace="~{admin_header :: navbar}"></div>
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="form-container">
                <div class="form-title">更改密码</div>
                <form id="changePasswordForm" method="post" th:action="@{/admin/rePassword}" >
                    <div th:if="${message}" class="alert alert-danger" role="alert">
                        <p th:text="${message}"></p>
                    </div>
                    <div class="mb-3">
                        <label for="currentPassword" class="form-label">当前密码</label>
                        <input type="password" class="form-control" id="currentPassword" name="currentPassword" placeholder="请输入当前密码">
                    </div>
                    <div class="mb-3">
                        <label for="newPassword" class="form-label">新密码</label>
                        <input type="password" class="form-control" id="newPassword" name="newPassword" placeholder="请输入新密码">
                    </div>
                    <div class="mb-3">
                        <label for="confirmPassword" class="form-label">确认新密码</label>
                        <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="请确认新密码">
                    </div>
                    <button type="submit" class="btn btn-primary btn-submit" id="repwdButton">确认更改</button>
                </form>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.getElementById('changePasswordForm').addEventListener('submit', function (event) {
        event.preventDefault();

        // 获取表单数据
        var currentPassword = document.getElementById('currentPassword').value;
        var newPassword = document.getElementById('newPassword').value;
        var confirmPassword = document.getElementById('confirmPassword').value;

        if (newPassword !== confirmPassword) {
            alert('两次输入的密码不一致');
            return;
        }

        if (newPassword === '' || confirmPassword === '') {
            alert('密码不能为空');
        }
        if (currentPassword === ''){
            alert('请输入当前密码');
        }

        // 提交表单
        document.getElementById('changePasswordForm').submit();

    });
</script>
</body>
</html>